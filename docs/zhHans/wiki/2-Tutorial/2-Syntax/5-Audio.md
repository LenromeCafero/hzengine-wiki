# 音频

::: tip 提示
由于 ZeppOS 系统能力限制，HZengine 音频系统目前只支持 `.mp3` 以及 `.opus` (手表录音原始文件) 格式的文件。
:::

如果想添加角色配音、背景音乐、音效等，就需要用到音频模块了。

在 HZengine 中，播放一段音乐非常简单。

首先准备一个音频文件，比如 `Only my railgun.mp3`，将其放在 `project/audio` 目录下。你也可以根据场景、角色等将音频文件分类在不同的子文件夹下，只要它在 audio 文件夹内。

接下来，在 hzs 剧本中，使用 **play 语句** 播放立刻播放一段音频

## play 语句

```renpy
play audio "Only my railgun.mp3"
```

第二个参数是音频文件路径，是 audio 文件夹下的相对路径，且包含后缀名。

注意第一个参数 `audio`，这是一个 **音频列表/Channal**，用于指定在哪个音频列表播放这个音频。

### 音频列表
一个 音频列表/Channal 同一时间只能播放一个音频文件。

在 Ren'Py 中，内置的 Channal 有 `audio`、`voice`、`music` 等，不同 Channal 之间的播放不会相互干扰，也就是说可以实现播放在 music 列表播放一段背景音乐的同时，在 voice 列表播放一段人物音频。

HZengine 的音频模块在设计之初就考虑了多列表，但受限于 ZeppOS 系统能力，**目前仅支持 `audio` 一个 Channal**。

类似于音乐软件的播放列表，每个 Channal 支持不同的播放方式：
- 顺序播放：按顺序播放列表内的音频，每个只播放一遍
- 列表循环：按顺序播放列表内的音频，全部结束后从头继续播放
暂时未提供切换播放方式的命令，计划后续支持

回到 play 语句，它实际上会清空指定列表的所有音频，再立即播放新的音频文件。

如果你想将音频文件添加到音频列表的末尾，等前面的音频都播放完后，再播放新的音频，请使用 **queue 语句**。

## queue 语句
语法和 play 语句一模一样：
```renpy
queue <音频列表> "<音频文件路径>"
```

同样，音频文件路径是 audio 文件夹下的相对路径，且应包含文件后缀。

## stop 语句
立刻停止指定列表的音频，并清空该列表
```renpy
stop <音频列表>
```
